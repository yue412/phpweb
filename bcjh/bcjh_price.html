<html>

<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>
        爆炒江湖
    </title>
    <style type="text/css">
        div.no {
            font-size: 120%;
            display: inline
        }

        div.yes {
            font-size: 80%;
            display: inline
        }

        div.content {
            color: #FF0000;
            display: inline
        }

        div.level {
            display: inline
        }
    </style>
    <script type="text/javascript" src="common.js">
    </script>
    <script type="text/javascript" src="bcjh_data.js">
    </script>
    <script type="text/javascript" src="bcjh_common.js">
    </script>
    <script type="text/javascript" src="bcjh_skill.js">
    </script>
    <script type="text/javascript" src="TableSorterV3.js">
    </script>
    <script type="text/javascript">
        function display_price()
        {
            do_ajax("get_db_data.php?name=bcjh_recipes&order_field=id", function(text){
                var my_recipes = JSON.parse(text);
                do_ajax("get_db_data.php?name=bcjh_chefs&order_field=id", function(text){
                    var e = document.getElementById("price");
                    var recipes = build_recipes(g_bcjh_data.recipes, my_recipes);
                    init_skills(g_bcjh_data.skills);
                    var my_chefs = JSON.parse(text);
                    init_chefs(my_chefs);
                    var s = "<table id=\"tb2\" border='1'>";
                    s += "<tr>";
                    s += "<td>";
                    s += "名称";
                    s += "</td>";
                    for (let i = 0; i < my_chefs.length; i++) {
                        const chef = my_chefs[i];
                        s += "<td>";
                        s += chef.name;
                        s += "</td>";
                    }
                    s += "</tr>";
                    for (let j = 0; j < recipes.length; j++) {
                        var recipe = recipes[j];
                        s += "<tr>";
                        s += "<td>";
                        s += recipe.name;
                        s += "</td>";
                        for (let i = 0; i < my_chefs.length; i++) {
                            const chef = my_chefs[i];
                            s += "<td>";
                            s += calc_price(recipe, chef) * recipe.limit;
                            s += "</td>";
                        }
                        s += "</tr>";
                    }
                    s += "</table>";
                    e.innerHTML = s;
                    var x = new TableSorter("tb2");
                });
            });
        }
    </script>
</head>
<body>
    <a href="bcjh_recipes.html">返回</a>
    <div id="price"></div>
    <script type="text/javascript">
        display_price();
    </script>
    <div id="test"></div>
</body>

</html>