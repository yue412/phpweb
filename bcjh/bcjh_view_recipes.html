<html>

<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>
        爆炒江湖
    </title>
    <style type="text/css">
        div.no {
            font-size: 120%;
            display: inline
        }

        div.yes {
            font-size: 80%;
            display: inline
        }

        div.content {
            color: #FF0000;
            display: inline
        }

        div.level {
            display: inline
        }
    </style>
    <script type="text/javascript" src="common.js">
    </script>
    <script type="text/javascript" src="bcjh_data.js">
    </script>
    <script type="text/javascript" src="bcjh_common.js">
    </script>
    <script type="text/javascript" src="bcjh_skill.js">
    </script>
    <script type="text/javascript" src="LP.js">
    </script>
    <script type="text/javascript">
        var my_maps = [
            {"name":"牧场","type":"meat","value":25}, //25 19 13 6 1
            {"name":"鸡舍","type":"meat","value":18}, //24 18 14 8 4 1
            {"name":"猪圈","type":"meat","value":18}, //18 12 7 5 1
            {"name":"菜棚","type":"veg","value":20}, // 25 20 15 8 4 1
            {"name":"菜地","type":"veg","value":22}, // 30 22 16 8 5 1
            {"name":"森林","type":"veg","value":17}, // 32 27 17 12 6 2
            {"name":"作坊","type":"creation","value":26}, // 26 21 16 11 5 1
            {"name":"池塘","type":"fish","value":24} // 29 24 19 14 9 5
        ];
        function get_chef_by_id(chefs, id)
        {
            for (let i = 0; i < chefs.length; i++) {
                const chef = chefs[i];
                if(chef.id == id)
                    return chef;
            }
            return null;
        }
        function display_price()
        {
            do_ajax("get_db_data.php?name=bcjh_recipes&order_field=id", function(text){
                var my_recipes = JSON.parse(text);
                do_ajax("get_db_data.php?name=bcjh_chefs&order_field=id", function(text){
                    init_skills(g_bcjh_data.skills);
                    my_chefs = JSON.parse(text);
                    init_chefs(my_chefs);
                    //display_chefs(my_chefs);
                    recipes = build_recipes(g_bcjh_data.recipes, my_recipes, my_chefs);
                    //recipes = filter_recipes_by_material(recipes);
                    for (let i = 0; i < recipes.length; i++) {
                        var recipe = recipes[i];
                        recipe.recipe_chefs = recipe.recipe_chefs.replace(/<br>/g, " ");
                        recipe.guests_like = recipe.guests_like.replace(/<br>/g, " ");
                        recipe.first_guests = recipe.first_guests.replace(/<br>/g, " ");
                    }
                    var e = document.getElementById("price");
                    e.innerHTML = JSON.stringify(recipes);                    
                });
            });
        }
    </script>
</head>
<body>
    <div id="price"></div>
    <script type="text/javascript">
//        init_maps();
        display_price();
    </script>
    
</body>

</html>